<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Desafio dos Sólidos</title>
<style>
  :root{
    --bg1: #ffecd2;
    --bg2: #fcb69f;
    --accent: #7c3aed;
    --accent-2: #06b6d4;
    --card: #ffffff;
    --muted: #4b5563;
  }
  html,body{height:100%;}
  body{
    margin:0;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(135deg,var(--bg1),var(--bg2));
    display:flex;
    align-items:center;
    justify-content:center;
    padding:24px;
  }

  .game {
    width:100%;
    max-width:1000px;
    background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.92));
    border-radius:18px;
    box-shadow: 0 10px 30px rgba(16,24,40,0.18);
    overflow:hidden;
    display:grid;
    grid-template-columns: 1fr 360px;
    gap:18px;
  }

  header{
    grid-column:1/-1;
    padding:20px 28px;
    display:flex;
    align-items:center;
    gap:18px;
  }
  .logo {
    width:68px;height:68px;border-radius:12px;
    background: linear-gradient(135deg,var(--accent),var(--accent-2));
    color:white; display:flex;align-items:center;justify-content:center;
    font-weight:700;font-size:20px;box-shadow:0 6px 18px rgba(124,58,237,0.28);
  }
  h1{margin:0;font-size:20px;}
  p.lead{margin:0;color:var(--muted);font-size:13px;}

  main{padding:20px;}
  aside{
    padding:20px;
    border-left: 1px dashed rgba(16,24,40,0.05);
    background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.4));
  }

  .stats{display:flex;gap:8px;margin-bottom:12px;}
  .stat{
    background: linear-gradient(180deg,#fff,#f9fafb);
    padding:10px;border-radius:10px;flex:1;text-align:center;
    box-shadow:0 4px 10px rgba(2,6,23,0.06);
  }
  .stat small{display:block;color:var(--muted);font-size:12px;}
  .stat strong{display:block;font-size:18px;margin-top:6px;}

  .controls{display:flex;gap:8px;margin-bottom:14px;align-items:center;}
  .btn{
    padding:8px 10px;border-radius:10px;border:0;cursor:pointer;font-weight:600;
    box-shadow: 0 6px 14px rgba(2,6,23,0.06);
  }
  .btn-primary{background:linear-gradient(90deg,var(--accent),#5b21b6); color:white;}
  .btn-ghost{background:transparent;border:2px solid rgba(16,24,40,0.06);}

  .card{
    background:var(--card);padding:14px;border-radius:12px;margin-bottom:12px;
    box-shadow: 0 8px 20px rgba(2,6,23,0.05);
  }

  .solid-name{font-weight:700;font-size:18px;margin-bottom:6px;}
  .hint{color:var(--muted);font-size:13px;margin-bottom:10px;}

  .params{font-size:13px;color:#334155;margin-bottom:10px;}
  .input-row{display:flex;gap:8px;align-items:center;}
  input[type=number]{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(2,6,23,0.06);font-size:14px;text-align:center;}
  .small{font-size:12px;color:var(--muted);}

  .flash-success{animation: flashGreen 0.45s ease;}
  .flash-error{animation: flashRed 0.45s ease;}
  @keyframes flashGreen{0%{box-shadow:0 0 0 rgba(16,185,129,0)}50%{box-shadow:0 0 40px rgba(16,185,129,0.12)}100%{box-shadow:0 0 0 rgba(16,185,129,0)}}
  @keyframes flashRed{0%{box-shadow:0 0 0 rgba(239,68,68,0)}50%{box-shadow:0 0 40px rgba(239,68,68,0.12)}100%{box-shadow:0 0 0 rgba(239,68,68,0)}}

  .footer {font-size:12px;color:var(--muted);margin-top:8px;}
  @media (max-width:920px){
    .game{grid-template-columns:1fr;}
    aside{border-left:none;border-top:1px dashed rgba(16,24,40,0.05);}
  }
  .net {
    width:100%;height:86px;border-radius:8px;background:linear-gradient(180deg,#fff,#fbfbff);
    display:flex;align-items:center;justify-content:center;border:1px dashed rgba(2,6,23,0.06);
  }
  .mode-pill{font-size:12px;padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.6);border:1px solid rgba(2,6,23,0.04);}
</style>
</head>
<body>
<div class="game" id="gameRoot">
  <header>
    <div class="logo">GEO</div>
    <div>
      <h1>Desafio dos Sólidos — Versão 3min</h1>
      <p class="lead">Jogo educativo: calcule volumes com tempo extra e som ativável.</p>
    </div>
    <div style="margin-left:auto;display:flex;gap:8px;align-items:center;">
      <div class="mode-pill" id="clickToEnableAudio">Clique para ativar som</div>
    </div>
  </header>

  <main>
    <div class="card">
      <div class="stats">
        <div class="stat"><small>Tempo</small><strong id="timeLeft">180s</strong></div>
        <div class="stat"><small>Nível</small><strong id="level">1</strong></div>
        <div class="stat"><small>Pontuação (vez 1 / 2)</small><strong id="scoreDisplay">0 — 0</strong></div>
      </div>

      <div class="controls">
        <button class="btn btn-primary" id="btnSingle">Single</button>
        <button class="btn btn-ghost" id="btnDuo">2 Players</button>
        <button class="btn btn-ghost" id="btnReset">Reiniciar</button>
      </div>

      <div class="card" id="challengeCard">
        <div class="solid-name" id="solidName">Cubo</div>
        <div class="hint" id="solidHint">6 faces quadradas</div>
        <div class="net" id="netVisual"></div>

        <div class="params" id="paramList">aresta: 3 cm</div>

        <div class="input-row">
          <input id="answerInput" type="number" placeholder="Digite o volume (cm³)" />
          <button class="btn btn-primary" id="btnCheck">Verificar</button>
        </div>
        <div style="margin-top:10px;" class="small" id="messageBox">Boa sorte! Acertos dão tempo bônus.</div>
      </div>
    </div>
  </main>

  <aside>
    <div class="card">
      <strong>Regras rápidas</strong>
      <ul class="small" style="line-height:1.6;margin-top:6px;">
        <li>Começa com 180 segundos.</li>
        <li>Cada acerto adiciona +30s e +15 pontos.</li>
        <li>Erros tiram 5 pontos (e passam o turno no modo 2 jogadores).</li>
        <li>π = 3.14 fixo para todos os cálculos.</li>
      </ul>
    </div>
  </aside>
</div>

<script>
/* ========= Game logic ========= */
const PI = 3.14; // π fixo
const SOLIDS = [
  { name: 'Cubo', hint: '6 faces quadradas', param: ['aresta'], volume: (a) => a ** 3 },
  { name: 'Paralelepípedo', hint: 'Faces retangulares', param: ['comprimento','largura','altura'], volume: (a,b,c) => a*b*c },
  { name: 'Cilindro', hint: '2 bases circulares', param: ['raio','altura'], volume: (r,h) => PI * r ** 2 * h },
  { name: 'Cone', hint: '1 base circular + vértice', param: ['raio','altura'], volume: (r,h) => (PI * r ** 2 * h)/3 },
  { name: 'Pirâmide (base quadrada)', hint: 'Base quadrada + faces triangulares', param: ['aresta da base','altura'], volume: (a,h) => (a ** 2 * h)/3 },
  { name: 'Esfera', hint: 'Superfície contínua', param: ['raio'], volume: (r) => (4/3) * PI * r ** 3 }
];

let mode='single',level=1,timeLeft=180,scores=[0,0],playerTurn=0,running=true,currentSolid=null,params=[];

const timeLeftEl=document.getElementById('timeLeft');
const levelEl=document.getElementById('level');
const scoreDisplayEl=document.getElementById('scoreDisplay');
const solidNameEl=document.getElementById('solidName');
const solidHintEl=document.getElementById('solidHint');
const paramListEl=document.getElementById('paramList');
const messageBox=document.getElementById('messageBox');
const answerInput=document.getElementById('answerInput');
const btnCheck=document.getElementById('btnCheck');
const btnSingle=document.getElementById('btnSingle');
const btnDuo=document.getElementById('btnDuo');
const btnReset=document.getElementById('btnReset');
const clickToEnableAudio=document.getElementById('clickToEnableAudio');
const gameRoot=document.getElementById('gameRoot');

let audioCtx=null;
function ensureAudio(){ if(!audioCtx) audioCtx=new (window.AudioContext||window.webkitAudioContext)(); }
function playSuccess(){
  ensureAudio(); const ctx=audioCtx,t=ctx.currentTime;
  const o=ctx.createOscillator(),g=ctx.createGain();o.connect(g);g.connect(ctx.destination);
  o.frequency.value=880; g.gain.value=0.15; o.start(t); o.stop(t+0.3);
}
function playFail(){
  ensureAudio(); const ctx=audioCtx,t=ctx.currentTime;
  const o=ctx.createOscillator(),g=ctx.createGain();o.connect(g);g.connect(ctx.destination);
  o.type='square'; o.frequency.value=160; g.gain.value=0.15; o.start(t); o.stop(t+0.4);
}
function flash(type){
  gameRoot.classList.remove('flash-success','flash-error');
  gameRoot.classList.add(type==='success'?'flash-success':'flash-error');
  setTimeout(()=>gameRoot.classList.remove('flash-success','flash-error'),500);
}
function updateUI(){
  timeLeftEl.textContent=timeLeft+'s';
  levelEl.textContent=level;
  scoreDisplayEl.textContent=`${scores[0]} — ${scores[1]}`;
}
function showMessage(msg){messageBox.textContent=msg;}
function nextChallenge(){
  currentSolid=SOLIDS[Math.floor(Math.random()*SOLIDS.length)];
  params=currentSolid.param.map(()=>Math.floor(Math.random()*6)+1);
  solidNameEl.textContent=currentSolid.name;
  solidHintEl.textContent=currentSolid.hint;
  paramListEl.textContent=currentSolid.param.map((p,i)=>`${p}: ${params[i]} cm`).join(' • ');
  answerInput.value='';
}
function checkAnswer(){
  if(!currentSolid)return;
  const expected=currentSolid.volume(...params);
  const user=parseFloat(answerInput.value);
  const tol=Math.max(0.5,expected*0.02);
  if(Math.abs(user-expected)<=tol){
    playSuccess(); flash('success');
    const pts=15*level; scores[playerTurn]+=pts;
    timeLeft+=30; level++;
    showMessage(`✅ Correto! +${pts} pontos (+30s)`);
  }else{
    playFail(); flash('error');
    scores[playerTurn]=Math.max(0,scores[playerTurn]-5);
    showMessage(`❌ Errado! Volume = ${expected.toFixed(2)} cm³`);
    if(mode==='duo')playerTurn=1-playerTurn;
  }
  updateUI(); nextChallenge();
}

btnCheck.onclick=checkAnswer;
answerInput.onkeydown=(e)=>{if(e.key==='Enter')checkAnswer();};
btnReset.onclick=()=>{level=1;timeLeft=180;scores=[0,0];playerTurn=0;running=true;updateUI();nextChallenge();showMessage('🔁 Jogo reiniciado!');};
btnSingle.onclick=()=>{mode='single';btnSingle.classList.add('btn-primary');btnDuo.classList.remove('btn-primary');level=1;timeLeft=180;scores=[0,0];updateUI();nextChallenge();};
btnDuo.onclick=()=>{mode='duo';btnDuo.classList.add('btn-primary');btnSingle.classList.remove('btn-primary');level=1;timeLeft=180;scores=[0,0];updateUI();nextChallenge();};
clickToEnableAudio.onclick=()=>{ensureAudio();audioCtx.resume&&audioCtx.resume();clickToEnableAudio.textContent='Áudio ativado ✔';};

setInterval(()=>{
  if(!running)return;
  timeLeft--; updateUI();
  if(timeLeft<=0){running=false;showMessage('⏰ Tempo esgotado!');}
},1000);

updateUI();
nextChallenge();
showMessage('Clique em "Single" ou "2 Players" para começar!');
</script>
</body>
</html>

